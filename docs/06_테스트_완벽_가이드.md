# ğŸ“˜ Study 3: í…ŒìŠ¤íŠ¸, ìœ ì§€ë³´ìˆ˜, í”„ë¡œì íŠ¸ ê´€ë¦¬

**í•™ìŠµ ëª©í‘œ**: ì•ˆì •ì ì¸ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ìš´ì˜í•˜ê¸°

---

## ğŸ“– ëª©ì°¨

1. [í…ŒìŠ¤íŠ¸ & í’ˆì§ˆ ê´€ë¦¬](#1-í…ŒìŠ¤íŠ¸--í’ˆì§ˆ-ê´€ë¦¬)
2. [ì†Œí”„íŠ¸ì›¨ì–´ ìœ ì§€ë³´ìˆ˜](#2-ì†Œí”„íŠ¸ì›¨ì–´-ìœ ì§€ë³´ìˆ˜)
3. [í”„ë¡œì íŠ¸ ê´€ë¦¬](#3-í”„ë¡œì íŠ¸-ê´€ë¦¬)
4. [ì‹¤ì „ ì˜ˆì œ](#4-ì‹¤ì „-ì˜ˆì œ)

---

## 1. í…ŒìŠ¤íŠ¸ & í’ˆì§ˆ ê´€ë¦¬

### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```mermaid
graph BT
    A[Unit Tests<br/>ë‹¨ìœ„ í…ŒìŠ¤íŠ¸<br/>70%] --> B[Integration Tests<br/>í†µí•© í…ŒìŠ¤íŠ¸<br/>20%]
    B --> C[E2E Tests<br/>ì—”ë“œíˆ¬ì—”ë“œ<br/>10%]
```

### 1.1 Unit Test (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)

**ëª©ì **: í•¨ìˆ˜ í•˜ë‚˜ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

```python
"""
pytestë¡œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

ì„¤ì¹˜: poetry add pytest pytest-cov
ì‹¤í–‰: pytest
ì»¤ë²„ë¦¬ì§€: pytest --cov=.

ğŸ”— ê³µì‹ ë¬¸ì„œ: https://docs.pytest.org/
"""

# ========== services/user_service.py ==========
class UserService:
    def calculate_age(self, birth_year: int) -> int:
        """ë‚˜ì´ ê³„ì‚°"""
        current_year = 2024
        return current_year - birth_year

# ========== tests/test_user_service.py ==========
import pytest
from services.user_service import UserService

def test_calculate_age():
    """ë‚˜ì´ ê³„ì‚° í…ŒìŠ¤íŠ¸"""
    service = UserService()
    
    # Given (ì¤€ë¹„)
    birth_year = 1990
    
    # When (ì‹¤í–‰)
    age = service.calculate_age(birth_year)
    
    # Then (ê²€ì¦)
    assert age == 34

def test_calculate_age_with_invalid_year():
    """ìœ íš¨í•˜ì§€ ì•Šì€ ì—°ë„ í…ŒìŠ¤íŠ¸"""
    service = UserService()
    
    with pytest.raises(ValueError):
        service.calculate_age(3000)  # ë¯¸ë˜ ì—°ë„

# ========== Fixture ì‚¬ìš© ==========
@pytest.fixture
def user_service():
    """
    Fixture: í…ŒìŠ¤íŠ¸ ê°„ ê³µí†µ ì„¤ì •
    ë§¤ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìƒˆë¡œìš´ UserService ìƒì„±
    """
    return UserService()

def test_with_fixture(user_service):
    """Fixture í™œìš©"""
    age = user_service.calculate_age(1990)
    assert age == 34
```

### 1.2 Integration Test (í†µí•© í…ŒìŠ¤íŠ¸)

**ëª©ì **: ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ í•¨ê»˜ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸

```python
"""
DBì™€ í•¨ê»˜ ì‘ë™í•˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸

ğŸ”— ì°¸ê³ : https://fastapi.tiangolo.com/tutorial/testing/
"""

from fastapi.testclient import TestClient
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from main import app, get_db
from models.database import Base

# ========== í…ŒìŠ¤íŠ¸ìš© DB ì„¤ì • ==========
SQLALCHEMY_TEST_DATABASE_URL = "sqlite:///./test.db"

engine = create_engine(SQLALCHEMY_TEST_DATABASE_URL)
TestingSessionLocal = sessionmaker(bind=engine)

def override_get_db():
    """í…ŒìŠ¤íŠ¸ìš© DB ì„¸ì…˜"""
    db = TestingSessionLocal()
    try:
        yield db
    finally:
        db.close()

# DB ì˜¤ë²„ë¼ì´ë“œ
app.dependency_overrides[get_db] = override_get_db

# ========== í…ŒìŠ¤íŠ¸ ==========
@pytest.fixture(scope="function")
def test_db():
    """ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ê¹¨ë—í•œ DB"""
    Base.metadata.create_all(bind=engine)
    yield
    Base.metadata.drop_all(bind=engine)

client = TestClient(app)

def test_create_user(test_db):
    """ìœ ì € ìƒì„± API í…ŒìŠ¤íŠ¸"""
    # Given
    user_data = {
        "name": "í™ê¸¸ë™",
        "email": "hong@example.com"
    }
    
    # When
    response = client.post("/api/users", json=user_data)
    
    # Then
    assert response.status_code == 201
    data = response.json()
    assert data["name"] == "í™ê¸¸ë™"
    assert "id" in data

def test_get_user(test_db):
    """ìœ ì € ì¡°íšŒ API í…ŒìŠ¤íŠ¸"""
    # ë¨¼ì € ìœ ì € ìƒì„±
    client.post("/api/users", json={"name": "ê¹€ì² ìˆ˜", "email": "kim@example.com"})
    
    # ì¡°íšŒ
    response = client.get("/api/users/1")
    assert response.status_code == 200
    assert response.json()["name"] == "ê¹€ì² ìˆ˜"
```

### 1.3 E2E Test (ì—”ë“œíˆ¬ì—”ë“œ)

**ëª©ì **: ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

```python
"""
Playwrightë¡œ E2E í…ŒìŠ¤íŠ¸

ì„¤ì¹˜: poetry add playwright
ì´ˆê¸°í™”: playwright install

ğŸ”— ê³µì‹ ë¬¸ì„œ: https://playwright.dev/
"""

from playwright.sync_api import sync_playwright

def test_user_registration_flow():
    """íšŒì›ê°€ì… í”Œë¡œìš° í…ŒìŠ¤íŠ¸"""
    with sync_playwright() as p:
        # ë¸Œë¼ìš°ì € ì‹¤í–‰
        browser = p.chromium.launch(headless=True)
        page = browser.new_page()
        
        # 1. íšŒì›ê°€ì… í˜ì´ì§€ ì ‘ì†
        page.goto("http://localhost:3000/register")
        
        # 2. í¼ ì…ë ¥
        page.fill('input[name="email"]', "test@example.com")
        page.fill('input[name="password"]', "password123")
        
        # 3. ì œì¶œ
        page.click('button[type="submit"]')
        
        # 4. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸
        page.wait_for_selector('.success-message')
        assert "í™˜ì˜í•©ë‹ˆë‹¤" in page.content()
        
        browser.close()
```

### 1.4 Mock & Stub

**ëª©ì **: ì™¸ë¶€ ì˜ì¡´ì„± ì œê±°

```python
"""
Mockìœ¼ë¡œ ì™¸ë¶€ API í˜¸ì¶œ í…ŒìŠ¤íŠ¸

ğŸ”— ì°¸ê³ : https://docs.python.org/3/library/unittest.mock.html
"""

from unittest.mock import Mock, patch
import requests

# ========== ì‹¤ì œ ì„œë¹„ìŠ¤ ==========
class PaymentService:
    def charge(self, user_id: int, amount: int) -> bool:
        """
        ì™¸ë¶€ ê²°ì œ API í˜¸ì¶œ
        ì‹¤ì œë¡œëŠ” ëˆì„ ì²­êµ¬í•˜ëŠ” ìœ„í—˜í•œ ì‘ì—…!
        """
        response = requests.post(
            "https://payment-api.com/charge",
            json={"user_id": user_id, "amount": amount}
        )
        return response.status_code == 200

# ========== í…ŒìŠ¤íŠ¸ (Mock ì‚¬ìš©) ==========
def test_charge_success():
    """ê²°ì œ ì„±ê³µ í…ŒìŠ¤íŠ¸ (ì‹¤ì œ API í˜¸ì¶œ ì•ˆ í•¨!)"""
    service = PaymentService()
    
    # requests.postë¥¼ Mockìœ¼ë¡œ êµì²´
    with patch('requests.post') as mock_post:
        # Mock ì‘ë‹µ ì„¤ì •
        mock_response = Mock()
        mock_response.status_code = 200
        mock_post.return_value = mock_response
        
        # í…ŒìŠ¤íŠ¸
        result = service.charge(user_id=1, amount=10000)
        
        # ê²€ì¦
        assert result is True
        mock_post.assert_called_once_with(
            "https://payment-api.com/charge",
            json={"user_id": 1, "amount": 10000}
        )
```

---

## 2. ì†Œí”„íŠ¸ì›¨ì–´ ìœ ì§€ë³´ìˆ˜

### 2.1 ë¡œê¹… (Logging)

**ì›ì¹™**: ë””ë²„ê¹…ì— í•„ìš”í•œ ì •ë³´ë¥¼ ê¸°ë¡

```python
"""
Python logging ëª¨ë“ˆ

ğŸ”— ê³µì‹ ë¬¸ì„œ: https://docs.python.org/3/library/logging.html
"""

import logging
from datetime import datetime

# ========== ë¡œê±° ì„¤ì • ==========
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('app.log'),  # íŒŒì¼ì— ì €ì¥
        logging.StreamHandler()          # ì½˜ì†”ì—ë„ ì¶œë ¥
    ]
)

logger = logging.getLogger(__name__)

# ========== ë¡œê·¸ ë ˆë²¨ ==========
logger.debug("ë””ë²„ê·¸ ì •ë³´ (ê°œë°œìš©)")      # DEBUG
logger.info("ì¼ë°˜ ì •ë³´")                  # INFO
logger.warning("ê²½ê³  (ì£¼ì˜ í•„ìš”)")        # WARNING
logger.error("ì—ëŸ¬ ë°œìƒ!")                # ERROR
logger.critical("ì‹¬ê°í•œ ì—ëŸ¬!")           # CRITICAL

# ========== ì‹¤ì „ ì˜ˆì œ ==========
@router.post("/users")
def create_user(user: UserCreate, db: Session = Depends(get_db)):
    logger.info(f"íšŒì›ê°€ì… ì‹œë„: {user.email}")
    
    try:
        # ìœ ì € ìƒì„± ë¡œì§
        db_user = User(**user.dict())
        db.add(db_user)
        db.commit()
        
        logger.info(f"íšŒì›ê°€ì… ì„±ê³µ: user_id={db_user.id}")
        return db_user
        
    except Exception as e:
        logger.error(f"íšŒì›ê°€ì… ì‹¤íŒ¨: {user.email}, ì—ëŸ¬={str(e)}")
        db.rollback()
        raise HTTPException(status_code=500, detail="Internal Server Error")

# ========== êµ¬ì¡°í™”ëœ ë¡œê¹… (JSON) ==========
import json

class JSONFormatter(logging.Formatter):
    """JSON í˜•ì‹ìœ¼ë¡œ ë¡œê·¸ ì¶œë ¥"""
    
    def format(self, record):
        log_data = {
            "timestamp": datetime.utcnow().isoformat(),
            "level": record.levelname,
            "message": record.getMessage(),
            "module": record.module,
            "function": record.funcName
        }
        return json.dumps(log_data)

# ì‚¬ìš©
handler = logging.StreamHandler()
handler.setFormatter(JSONFormatter())
logger.addHandler(handler)
```

### 2.2 ëª¨ë‹ˆí„°ë§

**ë„êµ¬**: Sentry, DataDog, Prometheus

```python
"""
Sentryë¡œ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§

ì„¤ì¹˜: poetry add sentry-sdk
ğŸ”— ê³µì‹ ë¬¸ì„œ: https://docs.sentry.io/platforms/python/
"""

import sentry_sdk
from sentry_sdk.integrations.fastapi import FastApiIntegration

# ========== Sentry ì´ˆê¸°í™” ==========
sentry_sdk.init(
    dsn="https://your-dsn@sentry.io/project-id",
    integrations=[FastApiIntegration()],
    traces_sample_rate=1.0,  # ëª¨ë“  íŠ¸ëœì­ì…˜ ì¶”ì 
    environment="production"
)

# ========== ì—ëŸ¬ ìë™ ìº¡ì²˜ ==========
@app.get("/error")
def trigger_error():
    """ì—ëŸ¬ ë°œìƒ ì‹œ ìë™ìœ¼ë¡œ Sentryì— ì „ì†¡"""
    raise ValueError("í…ŒìŠ¤íŠ¸ ì—ëŸ¬")

# ========== ìˆ˜ë™ ìº¡ì²˜ ==========
def process_payment(amount: int):
    try:
        # ê²°ì œ ë¡œì§
        pass
    except Exception as e:
        # ì¶”ê°€ ì •ë³´ì™€ í•¨ê»˜ Sentryì— ì „ì†¡
        sentry_sdk.capture_exception(
            e,
            extra={
                "amount": amount,
                "user_id": user_id
            }
        )
```

### 2.3 ì„±ëŠ¥ ìµœì í™”

**ë„êµ¬**: cProfile, line_profiler

```python
"""
ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§

ì„¤ì¹˜: poetry add line-profiler
ğŸ”— ì°¸ê³ : https://github.com/pyutils/line_profiler
"""

from line_profiler import LineProfiler

def slow_function():
    """ëŠë¦° í•¨ìˆ˜"""
    # N+1 ì¿¼ë¦¬ ë¬¸ì œ
    users = db.query(User).all()
    for user in users:
        posts = db.query(Post).filter(Post.user_id == user.id).all()  # âŒ
    
def fast_function():
    """ìµœì í™”ëœ í•¨ìˆ˜"""
    # JOINìœ¼ë¡œ í•œ ë²ˆì— ì¡°íšŒ
    users = db.query(User).options(joinedload(User.posts)).all()  # âœ…

# ========== í”„ë¡œíŒŒì¼ë§ ==========
profiler = LineProfiler()
profiler.add_function(slow_function)
profiler.add_function(fast_function)

profiler.run('slow_function()')
profiler.print_stats()

# ê²°ê³¼:
# Line #  Hits  Time     Per Hit  % Time  Line Contents
# ======  ====  =======  =======  ======  =============
#     10     1  500.0    500.0    100.0     for user in users:
#     11   100  5000.0    50.0    90.0        posts = db.query...
```

---

## 3. í”„ë¡œì íŠ¸ ê´€ë¦¬

### 3.1 ì´ìŠˆ íŠ¸ë˜í‚¹

**GitHub Issues í™œìš©**:

```markdown
## ë²„ê·¸ ë¦¬í¬íŠ¸ í…œí”Œë¦¿

**í™˜ê²½**
- OS: Ubuntu 22.04
- Python: 3.12
- FastAPI: 0.104.1

**ì¬í˜„ ë‹¨ê³„**
1. POST /api/usersë¡œ ìœ ì € ìƒì„±
2. GET /api/users/1 í˜¸ì¶œ
3. 500 ì—ëŸ¬ ë°œìƒ

**ì˜ˆìƒ ê²°ê³¼**
200 OK with user data

**ì‹¤ì œ ê²°ê³¼**
```json
{
  "detail": "Internal Server Error"
}
```

**ë¡œê·¸**
```
ERROR - AttributeError: 'NoneType' object has no attribute 'email'
```
```

### 3.2 Git ë¸Œëœì¹˜ ì „ëµ

```mermaid
gitGraph
    commit id: "Initial"
    branch develop
    checkout develop
    commit id: "Setup project"
    
    branch feature/login
    checkout feature/login
    commit id: "Add login API"
    commit id: "Add tests"
    
    checkout develop
    merge feature/login
    
    branch release/v1.0
    checkout release/v1.0
    commit id: "Bump version"
    
    checkout main
    merge release/v1.0 tag: "v1.0.0"
    
    checkout develop
    merge release/v1.0
```

**ë¸Œëœì¹˜ ì¢…ë¥˜**:
- `main`: í”„ë¡œë•ì…˜
- `develop`: ê°œë°œ
- `feature/*`: ê¸°ëŠ¥ ê°œë°œ
- `bugfix/*`: ë²„ê·¸ ìˆ˜ì •
- `release/*`: ë¦´ë¦¬ìŠ¤ ì¤€ë¹„

### 3.3 CI/CD íŒŒì´í”„ë¼ì¸

**GitHub Actions ì˜ˆì œ**:

```yaml
# .github/workflows/test.yml
name: Test & Deploy

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'
    
    - name: Install dependencies
      run: |
        pip install poetry
        poetry install
    
    - name: Run tests
      run: poetry run pytest --cov=.
    
    - name: Lint
      run: poetry run ruff check .
  
  deploy:
    needs: test
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    
    steps:
    - name: Deploy to production
      run: |
        # Docker ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
        docker build -t myapp .
        docker push myapp:latest
```

---

## 4. ì‹¤ì „ ì˜ˆì œ

### ì™„ì „í•œ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
project/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ test.yml          # CI/CD
â”‚       â””â”€â”€ deploy.yml
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ config.py             # ì„¤ì •
â”‚   â”œâ”€â”€ dependencies.py       # ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ repositories/
â”‚   â””â”€â”€ models/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.sh              # í™˜ê²½ ì„¤ì •
â”‚   â””â”€â”€ deploy.sh             # ë°°í¬
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ api.md                # API ë¬¸ì„œ
â”‚   â””â”€â”€ architecture.md       # ì•„í‚¤í…ì²˜ ì„¤ëª…
â”œâ”€â”€ .gitignore
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ pytest.ini
â”œâ”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml
```

### ì„¤ì • íŒŒì¼ ê´€ë¦¬

```python
"""
config.py - í™˜ê²½ë³„ ì„¤ì • ê´€ë¦¬

ğŸ”— ì°¸ê³ : https://pydantic-docs.helpmanual.io/usage/settings/
"""

from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    """
    í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì • ê´€ë¦¬
    
    .env íŒŒì¼ ì˜ˆì‹œ:
    DATABASE_URL=mysql://...
    SECRET_KEY=your-secret-key
    DEBUG=True
    """
    
    # DB
    DATABASE_URL: str
    
    # ë³´ì•ˆ
    SECRET_KEY: str
    ALGORITHM: str = "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30
    
    # ê¸°íƒ€
    DEBUG: bool = False
    LOG_LEVEL: str = "INFO"
    
    class Config:
        env_file = ".env"

# ì‹±ê¸€í†¤
settings = Settings()

# ì‚¬ìš©
from app.config import settings

engine = create_engine(settings.DATABASE_URL)
```

---

## ğŸ“š ì¶”ê°€ í•™ìŠµ ìë£Œ

### í…ŒìŠ¤íŠ¸
- [Pytest ê³µì‹ ë¬¸ì„œ](https://docs.pytest.org/)
- [Test-Driven Development](https://www.obeythetestinggoat.com/)

### ìœ ì§€ë³´ìˆ˜
- [The Twelve-Factor App](https://12factor.net/)
- [Logging Best Practices](https://betterstack.com/community/guides/logging/python/)

### í”„ë¡œì íŠ¸ ê´€ë¦¬
- [Scrum Guide](https://scrumguides.org/)
- [Atlassian Git Tutorial](https://www.atlassian.com/git/tutorials)

---

**ë‹¤ìŒ í•™ìŠµ**: [study4.md - ì˜¤í”ˆì†ŒìŠ¤ í˜‘ì—… & í•œêµ­ ê°œë°œ ë¬¸í™”](./study4.md)

## ğŸ¯ ì˜¤ëŠ˜ì˜ ì‹¤ìŠµ ê³¼ì œ (Daily Challenges)

### Day 1: ì²« í…ŒìŠ¤íŠ¸ ì‘ì„±
```python
"""
ê³¼ì œ: UserService í…ŒìŠ¤íŠ¸ ì‘ì„±

íŒŒì¼: tests/test_user_service.py
"""

import pytest
from services.user_service import UserService

def test_create_user():
    """ìœ ì € ìƒì„± í…ŒìŠ¤íŠ¸"""
    # TODO: í…ŒìŠ¤íŠ¸ ì‘ì„±
    pass

def test_duplicate_email():
    """ì¤‘ë³µ ì´ë©”ì¼ í…ŒìŠ¤íŠ¸"""
    # TODO: ValueError ë°œìƒí•˜ëŠ”ì§€ í™•ì¸
    pass

# âœï¸ pytest ì‹¤í–‰: poetry run pytest
```

### Day 2: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 100%
```bash
# ê³¼ì œ: í˜„ì¬ í”„ë¡œì íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ì¸

# 1. ì»¤ë²„ë¦¬ì§€ ì¸¡ì •
poetry run pytest --cov=. --cov-report=html

# 2. htmlcov/index.html ì—´ì–´ì„œ í™•ì¸

# 3. ì»¤ë²„ë¦¬ì§€ ë‚®ì€ íŒŒì¼ ì°¾ì•„ì„œ í…ŒìŠ¤íŠ¸ ì¶”ê°€
```

### Day 3: CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
```yaml
# ê³¼ì œ: GitHub Actions ì„¤ì •

# íŒŒì¼: .github/workflows/test.yml

name: Test

on:push]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'
    
    - name: Install dependencies
      run: |
        pip install poetry
        poetry install
    
    - name: Run tests
      run: poetry run pytest --cov=.
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3

# âœï¸ GitHubì— pushí•˜ê³  Actions íƒ­ í™•ì¸!
```

---

## ğŸ“¦ í…ŒìŠ¤íŠ¸ & í’ˆì§ˆ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

### 1. pytest-asyncio - ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸
```python
"""
FastAPIì˜ async í•¨ìˆ˜ í…ŒìŠ¤íŠ¸

ì„¤ì¹˜: poetry add pytest-asyncio
ğŸ”— ê³µì‹ ë¬¸ì„œ: https://pytest-asyncio.readthedocs.io/
"""

import pytest

@pytest.mark.asyncio
async def test_async_endpoint():
    """ë¹„ë™ê¸° ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸"""
    async with AsyncClient(app=app, base_url="http://test") as client:
        response = await client.get("/api/users")
        assert response.status_code == 200
```

### 2. Faker - í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
```python
"""
ê°€ì§œ ë°ì´í„°ë¥¼ ì‰½ê²Œ ìƒì„±

ì„¤ì¹˜: poetry add faker
ğŸ”— ê³µì‹ ë¬¸ì„œ: https://faker.readthedocs.io/
"""

from faker import Faker

fake = Faker('ko_KR')  # í•œêµ­ì–´

# ëœë¤ ë°ì´í„° ìƒì„±
name = fake.name()  # "ê¹€ì² ìˆ˜"
email = fake.email()  # "kim@example.com"
address = fake.address()  # "ì„œìš¸íŠ¹ë³„ì‹œ..."

# í…ŒìŠ¤íŠ¸ì— í™œìš©
def test_create_users():
    """100ëª…ì˜ ìœ ì € ìƒì„± í…ŒìŠ¤íŠ¸"""
    for _ in range(100):
        user = User(
            name=fake.name(),
            email=fake.email()
        )
        db.add(user)
    db.commit()
```

### 3. Locust - ë¶€í•˜ í…ŒìŠ¤íŠ¸
```python
"""
ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ í…ŒìŠ¤íŠ¸

ì„¤ì¹˜: poetry add locust
ğŸ”— ê³µì‹ ë¬¸ì„œ: https://locust.io/
"""

from locust import HttpUser, task, between

class WebsiteUser(HttpUser):
    """ê°€ìƒ ì‚¬ìš©ì"""
    wait_time = between(1, 3)  # 1-3ì´ˆ ëŒ€ê¸°
    
    @task(3)  # ê°€ì¤‘ì¹˜ 3
    def view_posts(self):
        """ê²Œì‹œê¸€ ì¡°íšŒ"""
        self.client.get("/api/posts")
    
    @task(1)  # ê°€ì¤‘ì¹˜ 1
    def create_post(self):
        """ê²Œì‹œê¸€ ì‘ì„±"""
        self.client.post("/api/posts", json={
            "title": "Test",
            "content": "Test content"
        })

# ì‹¤í–‰: locust -f locustfile.py
# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8089 ì ‘ì†
```

### 4. Black - ì½”ë“œ í¬ë§·í„°
```python
"""
Python ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì˜ˆì˜ê²Œ

ì„¤ì¹˜: poetry add black --group dev
ğŸ”— ê³µì‹ ë¬¸ì„œ: https://black.readthedocs.io/
"""

# pyproject.tomlì— ì„¤ì •
"""
[tool.black]
line-length = 100
target-version = ['py312']
"""

# ì‹¤í–‰
# poetry run black .
```

### 5. Ruff - ì´ˆê³ ì† ë¦°í„°
```python
"""
Flake8, isort ë“±ì„ ëŒ€ì²´í•˜ëŠ” ë¹ ë¥¸ ë¦°í„°

ì„¤ì¹˜: poetry add ruff --group dev
ğŸ”— ê³µì‹ ë¬¸ì„œ: https://docs.astral.sh/ruff/
"""

# pyproject.toml
"""
[tool.ruff]
line-length = 100
select = ["E", "F", "I"]
"""

# ì‹¤í–‰
# poetry run ruff check .
# poetry run ruff check . --fix  # ìë™ ìˆ˜ì •
```

---

## ğŸ’ª ë ˆë²¨ì—… ë„ì „ ê³¼ì œ

### ğŸŒŸ ì´ˆê¸‰ (Day 1-3)
- [ ] ì²« Unit Test ì‘ì„±
- [ ] ì»¤ë²„ë¦¬ì§€ 50% ë‹¬ì„±
- [ ] pytest ë§ˆìŠ¤í„°

### ğŸŒŸğŸŒŸ ì¤‘ê¸‰ (Day 4-7)
- [ ] ì»¤ë²„ë¦¬ì§€ 80% ë‹¬ì„±
- [ ] Integration Test ì¶”ê°€
- [ ] GitHub Actions CI/CD êµ¬ì¶•

### ğŸŒŸğŸŒŸğŸŒŸ ê³ ê¸‰ (Week 2)
- [ ] E2E í…ŒìŠ¤íŠ¸ (Playwright)
- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸ (Locust)
- [ ] Sentry ì—°ë™

---

**ë‹¤ìŒ í•™ìŠµ**: [study4.md - í˜‘ì—… & ì˜¤í”ˆì†ŒìŠ¤](./study4.md) ğŸš€
